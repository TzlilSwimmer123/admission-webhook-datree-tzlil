apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: datree-webhook
webhooks:
  - admissionReviewVersions:
      - v1
      - v1beta1
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURSekNDQWkrZ0F3SUJBZ0lDQitZd0RRWUpLb1pJaHZjTkFRRUxCUUF3TlRFek1ERUdBMVVFQ2hNcUwwTk8KUFVSaGRISmxaU0JCWkcxcGMzTnBiMjRnUTI5dWRISnZiR3hsY2lCWFpXSm9iMjlySUVOQk1CNFhEVEl5TVRFeApNREV5TVRReE0xb1hEVEkzTVRFeE1ERXlNVFF4TTFvd05URXpNREVHQTFVRUNoTXFMME5PUFVSaGRISmxaU0JCClpHMXBjM05wYjI0Z1EyOXVkSEp2Ykd4bGNpQlhaV0pvYjI5cklFTkJNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUYKQUFPQ0FROEFNSUlCQ2dLQ0FRRUFzWHZPait4RzN4L2wzVDdZVTBoRGJEYjZUdkhocFBxSjBBd2pTYmZJaVNVZgpYZE91QjAwM3d0WmRBTEx1ZDRRUXEvdVZjVldnWEZYK3daTWpHalBqWi91TXYvUW0xMm5idGlFeFlNMUhTZTk4CndjTERYUitoM1QyUGI3S1R3aGxtZnBoelNZQVROOUxYalY4dEFoYVNEb0g0OFJyZlhVK1k2ZHgxUXdiR0hhT08KOUdEREdJdEd6NDBLS3h6RGZyaTFaWmE1Y3F6ekF2YWwrZFBiY2ViaVA4eXErMC9SQTdzRTlScncxb2ZVcldoawpwa0pFQk1rbGo0dTF2WmF1NmE0NVBzcUhxa05RR1huWjk0UENMaUF0M2RJdDF4TW1qT2lERGxjNjFWdkUzUjZtClhIT2VxOFB6NkZuRmw2bGlVR1FsMUs2M2tsUG9aVy9sMkI4bEFSNERkd0lEQVFBQm8yRXdYekFPQmdOVkhROEIKQWY4RUJBTUNBb1F3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGQndNQk1BOEdBMVVkRXdFQgovd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGTGlWbzd2c1JvUE9QZFJWOWtaYkthcGovMWhjTUEwR0NTcUdTSWIzCkRRRUJDd1VBQTRJQkFRQ3cyY1ROUVl4elF2cU9CWm4zeXBhbW1uNEQvU010ekN4dlBHekE5Qk16YlJPek41ZGUKT0ttN3o5K0RLY1pGRmJncExmSGhiSEU5VVZ1MjhjeTVteVgzeklMTG1pdmxESWptS0h1ampGR3ZWUFhPaDNZaAp2OGJPaDFXVWsvOVNVNHhDQ1drenNhOG5vUHVzbjcrdUw5VExHYXN4dWt2Rmt2TU1MM3QydytsWHBsYXIxY2E1ClQ4ZUt5Um91UVlsRXZadVBsWS91ODdPUHljSVVqbFQyMGNFblAwenl1eWhnVEc1UGo1UHNaRW1PTmtVOGZ0eHkKMVRvNHY5TDUyNlU4R3c0R3ZOMnYwMmRxRHZTN3VqWkZaRlI0UFdwSnBEMno0Sk5mdnNEa0NuRHgyT09KaHJ4Twp4dDhsNHBzaVgvdmI5Q2VqeGlsbnlRNFJRQXN2WEcxMzErc1gKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
      service:
        name: datree-webhook-server
        namespace: datree
        path: /validate
        port: 443
    failurePolicy: Fail
    matchPolicy: Equivalent
    name: webhook-server.datree.svc
    namespaceSelector:
      matchExpressions:
        - key: admission.datree/validate
          operator: DoesNotExist
    objectSelector: {}
    rules:
      - apiGroups:
          - "*"
        apiVersions:
          - "*"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "*"
        scope: "*"
    sideEffects: None
    timeoutSeconds: 30
